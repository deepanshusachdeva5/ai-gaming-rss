<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI in Gaming — News Feed</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="header-title">
        <h1>AI in Gaming</h1>
        <span class="subtitle">Your curated news feed</span>
      </div>
      <div class="header-controls">
        <input
          type="search"
          id="search"
          placeholder="Filter by keyword…"
          autocomplete="off"
        />
        <button id="refresh-btn" title="Fetch latest articles">&#8635; Refresh</button>
        <button id="add-feed-btn" title="Add a custom RSS feed">+ Add Feed</button>
      </div>
    </div>
    <div class="status-bar">
      <span id="status-text">Loading…</span>
      <span id="article-count"></span>
    </div>
  </header>

  <main>
    <div id="feed" class="feed-grid">
      <div class="loading">Fetching articles…</div>
    </div>
  </main>

  <!-- Add Feed Modal -->
  <div id="feed-modal" class="modal-overlay hidden" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modal-header">
        <h2>Manage Sources</h2>
        <button class="modal-close" id="modal-close" aria-label="Close">&times;</button>
      </div>

      <!-- Tabs -->
      <div class="modal-tabs">
        <button class="modal-tab active" data-tab="rss">RSS Feed</button>
        <button class="modal-tab" data-tab="scrape">Any Website</button>
      </div>

      <!-- RSS tab -->
      <section class="modal-section tab-content" id="tab-rss">
        <h3>Add a new RSS feed</h3>
        <div class="form-group">
          <label for="feed-url">Feed URL</label>
          <div class="url-row">
            <input id="feed-url" type="url" placeholder="https://example.com/feed.xml" autocomplete="off" />
            <button id="check-feed-btn">Check</button>
          </div>
          <span id="feed-url-status" class="field-hint"></span>
        </div>
        <div class="form-group">
          <label for="feed-name">Name <span class="field-hint">(auto-detected if blank)</span></label>
          <input id="feed-name" type="text" placeholder="My Feed" />
        </div>
        <div class="form-group">
          <label for="feed-category">Category</label>
          <select id="feed-category">
            <option value="AI Models">AI Models</option>
            <option value="Game Dev AI">Game Dev AI</option>
            <option value="Research">Research</option>
            <option value="GitHub">GitHub</option>
          </select>
        </div>
        <div class="modal-actions">
          <button id="submit-feed-btn" class="btn-primary">Add Feed</button>
        </div>
        <p id="submit-status" class="field-hint"></p>
      </section>

      <!-- Any Website (Tavily) tab -->
      <section class="modal-section tab-content hidden" id="tab-scrape">
        <h3>Add any website</h3>
        <p class="field-hint tavily-note">Powered by Tavily AI — works on any site, no RSS needed.</p>
        <div class="form-group">
          <label for="site-url">Website URL</label>
          <input id="site-url" type="url" placeholder="https://inworld.ai" autocomplete="off" />
        </div>
        <div class="form-group">
          <label for="site-name">Name <span class="field-hint">(optional)</span></label>
          <input id="site-name" type="text" placeholder="Inworld AI" />
        </div>
        <div class="form-group">
          <label for="site-query">Search hint <span class="field-hint">(optional — helps Tavily find relevant articles)</span></label>
          <input id="site-query" type="text" placeholder="e.g. AI NPC game development" />
        </div>
        <div class="form-group">
          <label for="site-category">Category</label>
          <select id="site-category">
            <option value="AI Models">AI Models</option>
            <option value="Game Dev AI">Game Dev AI</option>
            <option value="Research">Research</option>
            <option value="GitHub">GitHub</option>
          </select>
        </div>
        <div class="modal-actions">
          <button id="submit-site-btn" class="btn-primary">Add Website</button>
        </div>
        <p id="submit-site-status" class="field-hint"></p>
      </section>

      <!-- RSS feeds list -->
      <section class="modal-section" id="rss-list-section">
        <h3>Your RSS feeds</h3>
        <div id="custom-feeds-list"><p class="field-hint">Loading…</p></div>
      </section>

      <!-- Scraped sites list -->
      <section class="modal-section" id="scrape-list-section">
        <h3>Your scraped websites</h3>
        <div id="scraped-sites-list"><p class="field-hint">Loading…</p></div>
      </section>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
